<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Forum - Posts & Comments</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .post { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; }
        .post-title { font-weight: bold; font-size: 1.2em; }
        .post-meta { font-size: 0.9em; color: #555; margin-bottom: 10px; }
        .comment { border-top: 1px solid #ddd; padding: 10px; margin-top: 5px; }
        .comment-meta { font-size: 0.8em; color: #666; }
        form textarea { width: 100%; height: 50px; margin-top: 5px; }
        form input, form button { margin-top: 5px; }
    </style>
</head>
<body>
    <h1>Forum - Tous les posts</h1>

    {{if .Posts}}
        {{range .Posts}}
            <div class="post">
                <div class="post-title">{{.Title}}</div>
                <div class="post-meta">Par {{.Author}} le {{.Date}}</div>
                <div class="post-content">{{.Content}}</div>

                <h4>Commentaires :</h4>
                {{if .Comments}}
                    {{range .Comments}}
                        <div class="comment">
                            <div class="comment-meta">{{.Author}} le {{.Date}}</div>
                            <div class="comment-text">{{.Text}}</div>
                            <div class="comment-meta">üëç {{.Likes}} | üëé {{.Dislikes}}</div>
                        </div>
                    {{end}}
                {{else}}
                    <p><em>Aucun commentaire pour ce post.</em></p>
                {{end}}

                <h4>Ajouter un commentaire :</h4>
                <form method="POST" action="/home">
                    <input type="hidden" name="postId" value="{{.ID}}">
                    <input type="text" name="author" placeholder="Votre nom" required><br>
                    <textarea name="text" placeholder="√âcris ton commentaire..." required></textarea><br>
                    <input type="number" name="like" value="0" hidden>
                    <input type="number" name="deslike" value="0" hidden>
                    <button type="submit">Envoyer</button>
                </form>
            </div>
        {{end}}
    {{else}}
        <p><em>Aucun post disponible.</em></p>
    {{end}}
</body>
</html>
